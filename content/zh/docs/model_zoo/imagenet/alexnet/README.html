
 

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>在ImageNet上训练AlexNet &mdash; incubator-singa 2.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../../../',
              VERSION:'2.0.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="用DenseNet做图像分类" href="../densenet/README.html" />
    <link rel="prev" title="在MNIST数据集上训练RBM模型" href="../../mnist/README.html" />
     <link href="../../../../_static/style.css" rel="stylesheet" type="text/css">
     <!--link href="../../../../_static/fontawesome-all.min.css" rel="stylesheet" type="text/css"-->
   <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
     <style>
   .fa:hover {
       opacity: 0.7;
   }
   .fab:hover {
       opacity: 0.7;
   }
     </style>
 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> incubator-singa
          

          
            
            <img src="../../../../_static/singa.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">文档</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html">安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../software_stack.html">软件架构</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../device.html">设备(Device)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tensor.html">张量(Tensor)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../layer.html">层(Layer)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../net.html">前馈网络</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../initializer.html">初始化器(Initializer)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../loss.html">损失(Loss)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../metric.html">度量(Metric)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../optimizer.html">优化器(Optimizer)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../data.html">数据(Data)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../image_tool.html">图像工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../snapshot.html">Snapshot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../utils.html">Utils</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">模型库</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../cifar10/README.html">在Cifar-10上训练CNN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../char-rnn/README.html">在文本上训练Char-RNN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mnist/README.html">在MNIST数据集上训练RBM模型</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">在ImageNet上训练AlexNet</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">操作说明</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../densenet/README.html">用DenseNet做图像分类</a></li>
<li class="toctree-l3"><a class="reference internal" href="../googlenet/README.html">用GoogleNet做图像分类</a></li>
<li class="toctree-l3"><a class="reference internal" href="../inception/README.html">用Inception V4做图像分类</a></li>
<li class="toctree-l3"><a class="reference internal" href="../resnet/README.html">用ResNet做图像分类</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vgg/README.html">用VGG做图像分类</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../downloads.html">下载 SINGA</a></li>
</ul>
<p class="caption"><span class="caption-text">开发</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../develop/schedule.html">开发时间表</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../develop/how-contribute.html">如何贡献给 SINGA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../develop/contribute-code.html">如何贡献代码</a></li>
</ul>
<p class="caption"><span class="caption-text">社区</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../community/source-repository.html">源代码库</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../community/mail-lists.html">项目邮件列表</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../community/issue-tracking.html">问题追踪</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../community/team-list.html">SINGA团队</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">incubator-singa</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../index.html">文档</a> &raquo;</li>
        
          <li><a href="../../index.html">模型库</a> &raquo;</li>
        
      <li>在ImageNet上训练AlexNet</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <!--
    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.
--><div class="section" id="imagenetalexnet">
<h1>在ImageNet上训练AlexNet<a class="headerlink" href="#imagenetalexnet" title="Permalink to this headline">¶</a></h1>
<p>卷积神经网络（CNN）是一种广泛用于图像和视频分类的前馈神经网络。 在这个例子中，我们将使用<a class="reference external" href="http://papers.nips.cc/paper/4824-imagenet-classification-with-deep-convolutional-neural-networks">深度CNN模型</a>来对ImageNet数据集进行图像分类。</p>
<div class="section" id="id1">
<h2>操作说明<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="singa">
<h3>编译SINGA<a class="headerlink" href="#singa" title="Permalink to this headline">¶</a></h3>
<p>请用CUDA，CUDNN和OpenCV编译SINGA。 您可以手动打开CMakeLists.txt中的选项或在build /文件夹中运行<code class="docutils literal"><span class="pre">ccmake</span> <span class="pre">..</span></code>进行配置。</p>
<p>我们已经在CuDNN V4和V5（V5需要Cuda7.5）上进行了测试。</p>
</div>
<div class="section" id="id2">
<h3>数据下载<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>请参考创建<a class="reference external" href="https://github.com/amd/OpenCL-caffe/wiki/Instructions-to-create-ImageNet-2012-data">ImageNet 2012数据集</a>的步骤1-3下载和加压数据。</li>
<li>你可以通过<a class="reference external" href="https://github.com/BVLC/caffe/blob/master/data/ilsvrc12/get_ilsvrc_aux.sh">get_ilsvrc_aux.sh</a>或从<a class="reference external" href="http://www.image-net.org/download-images">ImageNet</a>下载训练和验证集。</li>
</ul>
</div>
<div class="section" id="id3">
<h3>数据预处理<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">假设你已经下载了数据和描述文件。 现在我们应该将数据转换为二进制文件。你可以运行：</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>    <span class="n">sh</span> <span class="n">create_data</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>这个脚本会在指定输出目录下生成一个测试文件（<code class="docutils literal"><span class="pre">test.bin</span></code>），均值文件（<code class="docutils literal"><span class="pre">mean.bin</span></code>）和一些训练文件（<code class="docutils literal"><span class="pre">trainX.bin</span></code>）。</p>
</li>
<li><p class="first">你也可以改变<code class="docutils literal"><span class="pre">create_data.sh</span></code>的参数。</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">-trainlist</span> <span class="pre">&lt;file&gt;</span></code>: 训练数据列表文件;</li>
<li><code class="docutils literal"><span class="pre">-trainfolder</span> <span class="pre">&lt;folder&gt;</span></code>: 训练图片所在文件夹;</li>
<li><code class="docutils literal"><span class="pre">-testlist</span> <span class="pre">&lt;file&gt;</span></code>: 测试数据列表文件;</li>
<li><code class="docutils literal"><span class="pre">-testfolder</span> <span class="pre">&lt;floder&gt;</span></code>: 测试图像所在文件夹;</li>
<li><code class="docutils literal"><span class="pre">-outdata</span> <span class="pre">&lt;folder&gt;</span></code>: 保存输出文件的文件夹，包括平均值，训练和测试文件。 该脚本将在指定的文件夹中生成这些文件;</li>
<li><code class="docutils literal"><span class="pre">-filesize</span> <span class="pre">&lt;int&gt;</span></code>: 在每个二进制文件中存储的训练图片个数.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id4">
<h3>训练<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">准备好数据后，你可以运行下面指令来训练AlexNet模型。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>    <span class="n">sh</span> <span class="n">run</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</li>
<li><p class="first">你可以改变<code class="docutils literal"><span class="pre">run.sh</span></code>的参数。</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">-epoch</span> <span class="pre">&lt;int&gt;</span></code>: 要训练的epoch数目，默认为90;</li>
<li><code class="docutils literal"><span class="pre">-lr</span> <span class="pre">&lt;float&gt;</span></code>: 基础学习率，学习率将减少每20个时期，更具体地，lr = lr * exp（0.1 *（epoch / 20））;</li>
<li><code class="docutils literal"><span class="pre">-batchsize</span> <span class="pre">&lt;int&gt;</span></code>: 批数目，它应该根据你的内存而改变;</li>
<li><code class="docutils literal"><span class="pre">-filesize</span> <span class="pre">&lt;int&gt;</span></code>: 存储在每个二进制文件中的训练图像的数量，与数据预处理中的文件大小相同;</li>
<li><code class="docutils literal"><span class="pre">-ntrain</span> <span class="pre">&lt;int&gt;</span></code>: 训练图片的数目;</li>
<li><code class="docutils literal"><span class="pre">-ntest</span> <span class="pre">&lt;int&gt;</span></code>: 测试图片的数目;</li>
<li><code class="docutils literal"><span class="pre">-data</span> <span class="pre">&lt;folder&gt;</span></code>: 存储二进制文件的文件夹，它恰好是数据预处理步骤中的输出文件夹;</li>
<li><code class="docutils literal"><span class="pre">-pfreq</span> <span class="pre">&lt;int&gt;</span></code>: 打印当前模型状态（损失和准确度）的频率（以批数据为单位）;</li>
<li><code class="docutils literal"><span class="pre">-nthreads</span> <span class="pre">&lt;int&gt;</span></code>: 加载传给模型的数据所有的线程数。</li>
</ul>
</li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../densenet/README.html" class="btn btn-neutral float-right" title="用DenseNet做图像分类" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../mnist/README.html" class="btn btn-neutral float-left" title="在MNIST数据集上训练RBM模型" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019 The Apache Software Foundation. All rights reserved. Apache SINGA, Apache, the Apache feather logo, and the Apache SINGA project logos are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 
 <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
   <span class="rst-current-version" data-toggle="rst-current-version">
     <span class="fa fa-book"> incubator-singa </span>
     v: latest
     <span class="fa fa-caret-down"></span>
   </span>
   <div class="rst-other-versions">
       <dl>
           <dt>Languages</dt>
           <dd><a href="../../../../../index.html">English</a></dd>
           <dd><a href="../../../.././index.html">中文</a></dd>
       </dl>
       <dl>
           <dt>Versions</dt>
           <dd><a href="http://singa.apache.org/v0.3.0/">0.3</a></dd>
           <dd><a href="http://singa.apache.org/v1.1.0/">1.1</a></dd>
       </dl>
 
   </div>
   <a href="http://www.apache.org" style="color:lightblue;padding: 5px; font-size: 10px; text-align: center; text-decoration: none; margin: 5px 2px;">Foundation</a>
   <a href="http://www.apache.org/events/current-event" style="color:lightblue;padding: 5px; font-size: 10px; text-align: center; text-decoration: none; margin: 5px 2px;">Events</a>
   <a href="http://www.apache.org/foundation/thanks.html" style="color:lightblue;padding: 5px; font-size: 10px; text-align: center; text-decoration: none; margin: 5px 2px;">Thanks</a>
   <a href="http://www.apache.org/foundation/sponsorship.html" style="color:lightblue;padding: 5px; font-size: 10px;  text-align: center; text-decoration: none; margin: 5px 2px;">Sponsorship</a>
   <a href="http://www.apache.org/licenses/" style="color:lightblue;padding: 5px; font-size: 10px;  text-align: center; text-decoration: none; margin: 5px 2px;">License</a>
   <br>
   <a href="https://github.com/apache/incubator-singa" class="fa fa-github" style="padding: 10px; font-size: 20px; width: 30px; text-align: center; text-decoration: none; margin: 5px 2px;"></a>
   <a href="https://aws.amazon.com/marketplace/seller-profile?id=5bcac385-12c4-4802-aec7-351e09b77b4c" class="fab fa-aws" style="padding: 10px; font-size: 20px; width: 30px; text-align: center; text-decoration: none; margin: 5px 2px;"></a>
   <a href="https://hub.docker.com/r/apache/singa/" class="fab fa-docker" style="padding: 10px; font-size: 20px; width: 30px; text-align: center; text-decoration: none; margin: 5px 2px;"></a> 
   <a href="https://www.linkedin.com/groups/13550034" class="fa fa-linkedin" style="padding: 10px; font-size: 20px; width: 30px; text-align: center; text-decoration: none; margin: 5px 2px;"></a>
   <a href="https://twitter.com/ApacheSinga" class="fa fa-twitter" style="padding: 10px; font-size: 20px; width: 30px; text-align: center; text-decoration: none; margin: 5px 2px;"></a>
   <a href="https://www.facebook.com/Apache-SINGA-347284219056544/" class="fa fa-facebook" style="padding: 10px; font-size: 20px; width: 30px; text-align: center; text-decoration: none; margin: 5px 2px;"></a>
   <a href="https://www.researchgate.net/project/Apache-SINGA" class="fab fa-researchgate" style="padding: 10px; font-size: 20px; width: 30px; text-align: center; text-decoration: none; margin: 5px 2px;"></a>
 
 </div>
 
  <a href="https://github.com/apache/incubator-singa">
     <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
         src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"
         alt="Fork me on GitHub">
 </a>
 
  
 

</body>
</html>