
 

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>安装 &mdash; incubator-singa 2.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'2.0.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="软件架构" href="software_stack.html" />
    <link rel="prev" title="文档" href="index.html" />
     <link href="../_static/style.css" rel="stylesheet" type="text/css">
     <!--link href="../_static/fontawesome-all.min.css" rel="stylesheet" type="text/css"-->
   <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
     <style>
   .fa:hover {
       opacity: 0.7;
   }
   .fab:hover {
       opacity: 0.7;
   }
     </style>
 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> incubator-singa
          

          
            
            <img src="../_static/singa.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">文档</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">安装</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#conda">从Conda安装</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">从源码安装</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#condasinga">由conda创建SINGA</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ubuntusinga">使用本地工具在Ubuntu上创建SINGA</a></li>
<li class="toctree-l4"><a class="reference internal" href="#windowssinga">在Windows上编译SINGA</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">更多编译选择</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#faq">FAQ</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="software_stack.html">软件架构</a></li>
<li class="toctree-l2"><a class="reference internal" href="device.html">设备(Device)</a></li>
<li class="toctree-l2"><a class="reference internal" href="tensor.html">张量(Tensor)</a></li>
<li class="toctree-l2"><a class="reference internal" href="layer.html">层(Layer)</a></li>
<li class="toctree-l2"><a class="reference internal" href="net.html">前馈网络</a></li>
<li class="toctree-l2"><a class="reference internal" href="initializer.html">初始化器(Initializer)</a></li>
<li class="toctree-l2"><a class="reference internal" href="loss.html">损失(Loss)</a></li>
<li class="toctree-l2"><a class="reference internal" href="metric.html">度量(Metric)</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimizer.html">优化器(Optimizer)</a></li>
<li class="toctree-l2"><a class="reference internal" href="data.html">数据(Data)</a></li>
<li class="toctree-l2"><a class="reference internal" href="image_tool.html">图像工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapshot.html">Snapshot</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="model_zoo/index.html">模型库</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../downloads.html">下载 SINGA</a></li>
</ul>
<p class="caption"><span class="caption-text">开发</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../develop/schedule.html">开发时间表</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/how-contribute.html">如何贡献给 SINGA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/contribute-code.html">如何贡献代码</a></li>
</ul>
<p class="caption"><span class="caption-text">社区</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community/source-repository.html">源代码库</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/mail-lists.html">项目邮件列表</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/issue-tracking.html">问题追踪</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/team-list.html">SINGA团队</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">incubator-singa</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">文档</a> &raquo;</li>
        
      <li>安装</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>安装<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="conda">
<h2>从Conda安装<a class="headerlink" href="#conda" title="Permalink to this headline">¶</a></h2>
<p>Conda是Python，CPP和其他软件包的软件包管理员。</p>
<p>目前，SINGA有适用于Linux和MacOSX的conda软件包（Python 2.7和Python 3.6）。
建议使用<a class="reference external" href="https://conda.io/miniconda.html">Miniconda3</a>与SINGA一起使用。安装完miniconda后，执行以下命令之一来安装SINGA。</p>
<ol>
<li><p class="first">CPU版本</p>
<div class="highlight-default"><div class="highlight"><pre><span></span> <span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">nusdbsystem</span> <span class="n">singa</span><span class="o">-</span><span class="n">cpu</span>
</pre></div>
</div>
</li>
<li><p class="first">由CUDA和cuDNN支持的GPU版本</p>
<div class="highlight-default"><div class="highlight"><pre><span></span> <span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">nusdbsystem</span> <span class="n">singa</span><span class="o">-</span><span class="n">gpu</span>
</pre></div>
</div>
</li>
</ol>
<p>等同于</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>	<span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">nusdbsystem</span> <span class="n">singa</span><span class="o">=</span><span class="mf">1.1</span><span class="o">.</span><span class="mi">1</span><span class="o">=</span><span class="n">py36_cuda9</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">cudnn7</span><span class="o">.</span><span class="mf">1.2</span>
</pre></div>
</div>
<p>在执行上述命令之前，必须先安装CUDA 9.0。 其他CUDA版本的Singa软件包也可用。 以下说明列出了所有可用的Singa软件包。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>	<span class="n">conda</span> <span class="n">search</span> <span class="o">-</span><span class="n">c</span> <span class="n">nusdbsystem</span> <span class="n">singa</span>
</pre></div>
</div>
<p>如果下面指令没有出现错误提示，说明SINGA已经安装成功。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>	<span class="n">python</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;from singa import tensor&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h2>从源码安装<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>源文件可以被下载为<a class="reference external" href="https://dist.apache.org/repos/dist/dev/incubator/singa/">tar.gz 文件</a>，或者为一个git仓库：</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>	$ git clone https://github.com/apache/incubator-singa.git
	$ cd incubator-singa/
</pre></div>
</div>
<div class="section" id="condasinga">
<h3>由conda创建SINGA<a class="headerlink" href="#condasinga" title="Permalink to this headline">¶</a></h3>
<p>Conda-build是一款构建工具，可以安装anaconda云中的相关库并执行构建脚本。 生成的软件包可以上传到anaconda云中供他人下载和安装。</p>
<p>安装conda-build (安装miniconda后)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>	<span class="n">conda</span> <span class="n">install</span> <span class="n">conda</span><span class="o">-</span><span class="n">build</span>
</pre></div>
</div>
<p>创建CPU版本的SINGA</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>	<span class="n">export</span> <span class="n">BUILD_STR</span><span class="o">=</span><span class="n">cpu</span>
	<span class="n">conda</span> <span class="n">build</span> <span class="n">tool</span><span class="o">/</span><span class="n">conda</span><span class="o">/</span><span class="n">singa</span><span class="o">/</span> <span class="o">--</span><span class="n">python3</span><span class="o">.</span><span class="mi">6</span> <span class="p">(</span><span class="ow">or</span> <span class="o">--</span><span class="n">python2</span><span class="o">.</span><span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
<p>上面的指令已在Ubuntu 16.04和Mac OSX上测试过。更多信息请参考<a class="reference external" href="https://travis-ci.org/apache/incubator-singa">Travis-CI页面</a>。</p>
<p>创建GPU版本的SINGA</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>	<span class="n">export</span> <span class="n">BUILD_STR</span><span class="o">=</span><span class="n">cudax</span><span class="o">.</span><span class="n">y</span><span class="o">-</span><span class="n">cudnna</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">c</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span> <span class="n">cuda9</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">cudnn7</span><span class="o">.</span><span class="mf">1.2</span><span class="p">)</span>
	<span class="n">export</span> <span class="n">CUDNN_PATH</span><span class="o">=&lt;</span><span class="n">path</span> <span class="n">to</span> <span class="n">cudnn</span> <span class="n">folder</span><span class="o">&gt;</span>
	<span class="n">conda</span> <span class="n">build</span> <span class="n">tool</span><span class="o">/</span><span class="n">conda</span><span class="o">/</span><span class="n">singa</span><span class="o">/</span> <span class="o">--</span><span class="n">python3</span><span class="o">.</span><span class="mi">6</span> <span class="p">(</span><span class="ow">or</span> <span class="o">--</span><span class="n">python2</span><span class="o">.</span><span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
<p>这些基于GPU平台的指令已经在Ubuntu 16.04 (cuDNN &gt;= 7和CUDA &gt;= 9)上测试过。
<a class="reference external" href="https://hub.docker.com/r/nvidia/cuda/">Nvidia的docker镜像</a>提供了cuDNN和CUDA的创建环境。</p>
<p>屏幕上将显示生成的包文件的位置。
请参阅<a class="reference external" href="https://conda.io/docs/commands/conda-install.html">conda安装</a>
对从本地文件安装软件包的说明。</p>
</div>
<div class="section" id="ubuntusinga">
<h3>使用本地工具在Ubuntu上创建SINGA<a class="headerlink" href="#ubuntusinga" title="Permalink to this headline">¶</a></h3>
<p>编译和运行SINGA需要以下库。
有关在Ubuntu 16.04上安装它们的说明，
请参阅SINGA <a class="reference external" href="https://github.com/apache/incubator-singa/blob/master/tool/docker/">Dockerfiles</a>。</p>
<ul class="simple">
<li>cmake (&gt;=2.8)</li>
<li>gcc (&gt;=4.8.1) or Clang</li>
<li>google protobuf (&gt;=2.5)</li>
<li>blas (tested with openblas &gt;=0.2.10)</li>
<li>swig(&gt;=3.0.10) for compiling PySINGA</li>
<li>numpy(&gt;=1.11.0) for compiling PySINGA</li>
</ul>
<ol class="simple">
<li>在incubator-singa目录下创建一个<code class="docutils literal"><span class="pre">build</span></code>文件夹并进入其中</li>
<li>运行 <code class="docutils literal"><span class="pre">cmake</span> <span class="pre">[options]</span> <span class="pre">..</span></code>
默认情况下除了<code class="docutils literal"><span class="pre">USE_PYTHON</span></code>，其他所有可选项都是OFF<ul>
<li><code class="docutils literal"><span class="pre">USE_MODULES=ON</span></code>, 当protobuf和blas没有被安装时使用</li>
<li><code class="docutils literal"><span class="pre">USE_CUDA=ON</span></code>, 当CUDA和cuDNN可用时使用</li>
<li><code class="docutils literal"><span class="pre">USE_PYTHON=ON</span></code>, 用于编译PySINGA</li>
<li><code class="docutils literal"><span class="pre">USE_PYTHON3=ON</span></code>, 用于支持Python 3编译 (默认的是Python 2)</li>
<li><code class="docutils literal"><span class="pre">USE_OPENCL=ON</span></code>, 用于支持OpenCL编译</li>
<li><code class="docutils literal"><span class="pre">PACKAGE=ON</span></code>, 用于创建Debian包</li>
<li><code class="docutils literal"><span class="pre">ENABLE_TEST</span></code>，用于编译单元测试用例</li>
</ul>
</li>
<li>编译代码， 如： <code class="docutils literal"><span class="pre">make</span></code></li>
<li>进入python文件夹</li>
<li>运行 <code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">.</span></code>或者 <code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.</span></code>。第二个指令创建符号链接而不是将文件复制到python站点包文件夹中。</li>
</ol>
<p>当USE_PYTHON=ON时，第4步和第5步用于安装PySINGA。</p>
<p>在通过ENABLE_TEST=ON编译好SINGA后，你可以运行单元测试</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>	$ ./bin/test_singa
</pre></div>
</div>
<p>你可以看到所有测试用例和测试结果。
如果SINGA通过所有测试，那么你已经成功安装了SINGA。</p>
</div>
<div class="section" id="windowssinga">
<h3>在Windows上编译SINGA<a class="headerlink" href="#windowssinga" title="Permalink to this headline">¶</a></h3>
<p>基于Python支持的Windows上的安装说明可以在<a class="reference external" href="install_win.html">这里</a>找到。</p>
</div>
<div class="section" id="id3">
<h3>更多编译选择<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="section" id="use-modules">
<h4>USE_MODULES<a class="headerlink" href="#use-modules" title="Permalink to this headline">¶</a></h4>
<p>如果protobuf和openblas没有安装，在编译SINGA时需要如下处理：</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>	$ In SINGA ROOT folder
	$ mkdir build
	$ cd build
	$ cmake -DUSE_MODULES=ON ..
	$ make
</pre></div>
</div>
<p>cmake会下载OpenBlas和Protobuf（2.6.1）并同SINGA一起编译。</p>
<p>你可以使用<code class="docutils literal"><span class="pre">cmake</span> <span class="pre">..</span></code>来配置编译操作指令。 如果一些依赖库没有被安装在默认路径下，你需要导出相应的环境变量：</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>	<span class="n">export</span> <span class="n">CMAKE_INCLUDE_PATH</span><span class="o">=&lt;</span><span class="n">path</span> <span class="n">to</span> <span class="n">the</span> <span class="n">header</span> <span class="n">file</span> <span class="n">folder</span><span class="o">&gt;</span>
	<span class="n">export</span> <span class="n">CMAKE_LIBRARY_PATH</span><span class="o">=&lt;</span><span class="n">path</span> <span class="n">to</span> <span class="n">the</span> <span class="n">lib</span> <span class="n">file</span> <span class="n">folder</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="use-python">
<h4>USE_PYTHON<a class="headerlink" href="#use-python" title="Permalink to this headline">¶</a></h4>
<p>类似于编译CPP代码， PySINGA可以被这么编译：</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>	$ cmake -DUSE_PYTHON=ON ..
	$ make
	$ cd python
	$ pip install .
</pre></div>
</div>
</div>
<div class="section" id="use-cuda">
<h4>USE_CUDA<a class="headerlink" href="#use-cuda" title="Permalink to this headline">¶</a></h4>
<p>用户被推荐安装CUDA和<a class="reference external" href="https://developer.nvidia.com/cudnn">cuDNN</a>以在GPU上运行SINGA时获得更好的性能。</p>
<p>SINGA已经在CUDA 9和cuDNN 7上测试过。 如果cuDNN在非系统目录下解压，如/home/bob/local/cudnn/, 下面的指令需要被执行以让cmake和运行时能找到它：</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>	$ export CMAKE_INCLUDE_PATH=/home/bob/local/cudnn/include:$CMAKE_INCLUDE_PATH
	$ export CMAKE_LIBRARY_PATH=/home/bob/local/cudnn/lib64:$CMAKE_LIBRARY_PATH
	$ export LD_LIBRARY_PATH=/home/bob/local/cudnn/lib64:$LD_LIBRARY_PATH
</pre></div>
</div>
<p>cmake对CUDA和cuDNN的操作选项应该被开启：</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>	# 依赖库已经被安装
	$ cmake -DUSE_CUDA=ON ..
	$ make
</pre></div>
</div>
</div>
<div class="section" id="use-opencl">
<h4>USE_OPENCL<a class="headerlink" href="#use-opencl" title="Permalink to this headline">¶</a></h4>
<p>SINGA用opencl-header和viennacl（1.7.1版本或更新）以获得OpenCL支持。 它们可由以下指令安装：</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>	# 在Ubuntu 16.04上
	$ sudo apt-get install opencl-headers, libviennacl-dev
	# 在Fedora上
	$ sudo yum install opencl-headers, viennacl
</pre></div>
</div>
<p>另外，你将需要OpenCL Installable Client Driver (ICD)以在你的平台上运行OpenCL。</p>
<ul class="simple">
<li>对于AMD和Nvidia GPU, 驱动包还需要包含正确的OpenCL ICD。</li>
<li>对于英特尔CPUs和/或GPUs, 可以从<a class="reference external" href="https://software.intel.com/en-us/articles/opencl-drivers">英特尔官网</a>上获取到。 注意， 官网上提供的驱动仅支持近期的CPUs和GPUs。</li>
<li>对于更老的英特尔CPUs，你可以选用<code class="docutils literal"><span class="pre">beignet-opencl-icd</span></code>包。</li>
</ul>
<p>注意，在CPU上运行OpenCL目前是不推荐的，因为很慢。 内存传输是以秒的级别（CPU上为1000 ms，而GPU上为1毫秒）。</p>
<p>更多关于OpenCL环境配置的信息可以从<a class="reference external" href="https://wiki.tiker.net/OpenCLHowTo">这里</a>获得。</p>
<p>如果ViennaCL包版本低于1.7.1，你将需要从源码编译：</p>
<p>从<a class="reference external" href="https://github.com/viennacl/viennacl-dev">git仓库</a>clone，checkout到<code class="docutils literal"><span class="pre">release-1.7.1</span></code>标签。记得把仓库的路径加到环境变量<code class="docutils literal"><span class="pre">PATH</span></code>中，并且创建库到<code class="docutils literal"><span class="pre">LD_LIBRARY_PATH</span></code>。</p>
<p>编译基于OpenCL支持的SINGA (测试与SINGA 1.1)：</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>	$ cmake -DUSE_OPENCL=ON ..
	$ make
</pre></div>
</div>
</div>
<div class="section" id="package">
<h4>PACKAGE<a class="headerlink" href="#package" title="Permalink to this headline">¶</a></h4>
<p>此设置用于创建Debian包。 设置PACKAGE=ON并用以下命令创建包：</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>	$ cmake -DPACKAGE=ON
	$ make package
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="faq">
<h2>FAQ<a class="headerlink" href="#faq" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Q: 在使用由wheel安装的PySINGA(&#8216;import singa&#8216;)时，出现错误。</p>
<p>A: 请查看<code class="docutils literal"><span class="pre">python</span> <span class="pre">-c</span> <span class="pre">&quot;from</span> <span class="pre">singa</span> <span class="pre">import</span> <span class="pre">_singa_wrap&quot;</span></code>详细错误提示。 这有时是由依赖库造成的，比如，有多个版本的protobuf，cudnn缺失，numpy版本不匹配。 下面的步骤详述了不同的案例：</p>
<ol>
<li><p class="first">检查cudnn，cuda和gcc版本，推荐使用cudnn5，cuda7.5和gcc4.8/4.9。 如果gcc是5.0版本， 需要降低版本。 如果cudnn确实或者与wheel版本不匹配，你可以将正确的cudnn版本下载到~/local/cudnn/ 并且</p>
<div class="highlight-default"><div class="highlight"><pre><span></span> $ echo &quot;export LD_LIBRARY_PATH=/home/&lt;yourname&gt;/local/cudnn/lib64:$LD_LIBRARY_PATH&quot; &gt;&gt; ~/.bashrc
</pre></div>
</div>
</li>
<li><p class="first">如果是protobuf的问题，需要下载最新的<a class="reference external" href="https://issues.apache.org/jira/browse/SINGA-255">编译过protobuf和openblas的whl文件</a>。 或者，你可以从源码安装protobuf到指定文件夹，比如：~/local/；解压tar文件，然后执行</p>
<div class="highlight-default"><div class="highlight"><pre><span></span> $ ./configure --prefix=/home/&lt;yourname&gt;local
 $ make &amp;&amp; make install
 $ echo &quot;export LD_LIBRARY_PATH=/home/&lt;yourname&gt;/local/lib:$LD_LIBRARY_PATH&quot; &gt;&gt; ~/.bashrc
 $ source ~/.bashrc
</pre></div>
</div>
</li>
<li><p class="first">如果找不到其他python库，你可以用pip或conda创建python虚拟环境。</p>
</li>
<li><p class="first">如果不是以上原因造成的，进入<code class="docutils literal"><span class="pre">_singa_wrap.so</span></code>所在文件夹，执行</p>
<div class="highlight-default"><div class="highlight"><pre><span></span> $ python
 &gt;&gt; import importlib
 &gt;&gt; importlib.import_module(&#39;_singa_wrap&#39;)
</pre></div>
</div>
</li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span>检查错误信息。 比如，如果numpy版本不匹配，错误信息将会是

      RuntimeError: module compiled against API version 0xb but this version of numpy is 0xa

接着，你需要提升numpy版本。
</pre></div>
</div>
</li>
<li><p class="first">Q: 运行<code class="docutils literal"><span class="pre">cmake</span> <span class="pre">..</span></code>报错，找不到依赖库。</p>
<p>A: 如果你没有安装相应库，就去安装它们。如果你把这些库安装在非系统默认的路径下，如/usr/local，你可以将正确路径导出到环境变量中：</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>  $ export CMAKE_INCLUDE_PATH=&lt;path to your header file folder&gt;
  $ export CMAKE_LIBRARY_PATH=&lt;path to your lib file folder&gt;
</pre></div>
</div>
</li>
<li><p class="first">Q: <code class="docutils literal"><span class="pre">make</span></code>报错，如连接阶段</p>
<p>A: 如果你的库文件在非系统默认路径下，你需要导出相应的变量</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>  $ export LIBRARY_PATH=&lt;path to your lib file folder&gt;
  $ export LD_LIBRARY_PATH=&lt;path to your lib file folder&gt;
</pre></div>
</div>
</li>
<li><p class="first">Q: 头文件错误，比如：&#8216;cblas.h no such file or directory exists&#8216;</p>
<p>A: 你需要把cblas.h的路径加入到CPLUS_INCLUDE_PATH，如</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>  $ export CPLUS_INCLUDE_PATH=/opt/OpenBLAS/include:$CPLUS_INCLUDE_PATH
</pre></div>
</div>
</li>
<li><p class="first">Q:编译SINGA时，我发现了错误<code class="docutils literal"><span class="pre">SSE2</span> <span class="pre">instruction</span> <span class="pre">set</span> <span class="pre">not</span> <span class="pre">enabled</span></code></p>
<p>A:你可以尝试如下命令</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>  $ make CFLAGS=&#39;-msse2&#39; CXXFLAGS=&#39;-msse2&#39;
</pre></div>
</div>
</li>
<li><p class="first">Q:当我试图导入.py文件时，我得到错误提示<code class="docutils literal"><span class="pre">ImportError:</span> <span class="pre">cannot</span> <span class="pre">import</span> <span class="pre">name</span> <span class="pre">enum_type_wrapper</span></code>。</p>
<p>A: 你需要安装绑定到python的protobuf，可以由如下命令安装</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>  $ sudo apt-get install protobuf
</pre></div>
</div>
<p>或者从源码安装</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>  $ cd /PROTOBUF/SOURCE/FOLDER
  $ cd python
  $ python setup.py build
  $ python setup.py install
</pre></div>
</div>
</li>
<li><p class="first">Q: 当我从源码创建OpenBLAS时，被告知需要Fortran编译器。</p>
<p>A: 你可以用如下命令编译OpenBLAS</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>  $ make ONLY_CBLAS=1
</pre></div>
</div>
<p>或者</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>  $ sudo apt-get install libopenblas-dev
</pre></div>
</div>
</li>
<li><p class="first">Q: 当我创建protocol buffer时，出现错误提示<code class="docutils literal"><span class="pre">GLIBC++_3.4.20</span> <span class="pre">not</span> <span class="pre">found</span> <span class="pre">in</span> <span class="pre">/usr/lib64/libstdc++.so.6</span></code>。</p>
<p>A: 这说明连接器找到了libstdc++.so.6，但是这个库属于一个更老版本的GCC编译器。 要编译的程序依赖于定义在新版本GCC下的libstdc++库，所以连接器必须被告知如何找到新版的可共享的libstdc++库。 最简单的处理方法是找到正确的libstdc++库，导出到LD_LIBRARY_PATH变量。 比如，如果GLIBC++_3.4.20被列在如下命令的输出中</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>  $ strings /usr/local/lib64/libstdc++.so.6|grep GLIBC++
</pre></div>
</div>
<p>之后，你只需要设置环境变量</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>  $ export LD_LIBRARY_PATH=/usr/local/lib64:$LD_LIBRARY_PATH
</pre></div>
</div>
</li>
<li><p class="first">Q: 当我创建glog时报错，&#8220;src/logging_unittest.cc:83:20: error: &#8216;gflags&#8216; is not a namespace-name&#8220;。</p>
<p>A: 这可能是你装了一个不同命名空间的gflags，比如&#8220;google&#8220;，所以glog找不到&#8216;gflags&#8216;命名空间。 gflags不是创建glog必须的， 所以你可以修改configure.ac文件以忽略gflags。</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>  <span class="mf">1.</span> <span class="n">cd</span> <span class="n">to</span> <span class="n">glog</span> <span class="n">src</span> <span class="n">directory</span>
  <span class="mf">2.</span> <span class="n">change</span> <span class="n">line</span> <span class="mi">125</span> <span class="n">of</span> <span class="n">configure</span><span class="o">.</span><span class="n">ac</span>  <span class="n">to</span> <span class="s2">&quot;AC_CHECK_LIB(gflags, main, ac_cv_have_libgflags=0, ac_cv_have_libgflags=0)&quot;</span>
  <span class="mf">3.</span> <span class="n">autoreconf</span>
</pre></div>
</div>
<p>之后，你可以重新创建glog。</p>
</li>
<li><p class="first">Q: 当使用虚拟环境时，每次我运行pip install都会重新安装numpy。 然而，在<code class="docutils literal"><span class="pre">import</span> <span class="pre">numpy</span></code>时，numpy可能并没有被使用。</p>
<p>A: 这可能是因为在使用虚拟环境时，<code class="docutils literal"><span class="pre">PYTHONPATH</span></code>被设置成了空以防止与虚拟环境中的路径发生冲突。</p>
</li>
<li><p class="first">Q: 当从源码编译PySINGA时，会因为缺失&lt;numpy/objectarray.h&gt;而出现编译错误。</p>
<p>A: 请安装numpy并且通过如下命令导出numpy头文件</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>  $ export CPLUS_INCLUDE_PATH=`python -c &quot;import numpy; print numpy.get_include()&quot;`:$CPLUS_INCLUDE_PATH
</pre></div>
</div>
</li>
<li><p class="first">Q: 当在Mac OS X下运行PySINGA时，我得到了错误信息&#8220;Fatal Python error: PyThreadState_Get: no current thread Abort trap: 6&#8220;。</p>
<p>A: 这个错误很典型地出现在当你系统中存在多个版本的python并且你是通过pip安装
SINGA的（这个问题可以通过由conda安装SINGA来解决）， 比如：一个来自于OS，一个通过Homebrew安装。 和SINGA连接的Python必须和Python解析器是同个版本。你可以通过which python来查看python解析器版本，并通过otool -L <path to _singa_wrap.so>检查和PySINGA连接的Python版本。 为了解决这个问题， 需要用正确的Python版本来编译SINGA。 特别地，如果你从源码创建的PySINGA，当唤起<a class="reference external" href="http://stackoverflow.com/questions/15291500/i-have-2-versions-of-python-installed-but-cmake-is-using-older-version-how-do">cmake</a>时你需要指定安装路径</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>  $ cmake -DPYTHON_LIBRARY=`python-config --prefix`/lib/libpython2.7.dylib -DPYTHON_INCLUDE_DIR=`python-config --prefix`/include/python2.7/ ..
</pre></div>
</div>
<p>如果从二进制文件安装PySINGA，比如debian或者wheel，那么你需要改变python解析器，如重置变量$PATH，把正确的Python路径加在最前面。</p>
</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="software_stack.html" class="btn btn-neutral float-right" title="软件架构" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="文档" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019 The Apache Software Foundation. All rights reserved. Apache SINGA, Apache, the Apache feather logo, and the Apache SINGA project logos are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 
 <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
   <span class="rst-current-version" data-toggle="rst-current-version">
     <span class="fa fa-book"> incubator-singa </span>
     v: latest
     <span class="fa fa-caret-down"></span>
   </span>
   <div class="rst-other-versions">
       <dl>
           <dt>Languages</dt>
           <dd><a href="../../index.html">English</a></dd>
           <dd><a href=".././index.html">中文</a></dd>
       </dl>
       <dl>
           <dt>Versions</dt>
           <dd><a href="http://singa.apache.org/v0.3.0/">0.3</a></dd>
           <dd><a href="http://singa.apache.org/v1.1.0/">1.1</a></dd>
       </dl>
 
   </div>
   <a href="http://www.apache.org" style="color:lightblue;padding: 5px; font-size: 10px; text-align: center; text-decoration: none; margin: 5px 2px;">Foundation</a>
   <a href="http://www.apache.org/events/current-event" style="color:lightblue;padding: 5px; font-size: 10px; text-align: center; text-decoration: none; margin: 5px 2px;">Events</a>
   <a href="http://www.apache.org/foundation/thanks.html" style="color:lightblue;padding: 5px; font-size: 10px; text-align: center; text-decoration: none; margin: 5px 2px;">Thanks</a>
   <a href="http://www.apache.org/foundation/sponsorship.html" style="color:lightblue;padding: 5px; font-size: 10px;  text-align: center; text-decoration: none; margin: 5px 2px;">Sponsorship</a>
   <a href="http://www.apache.org/licenses/" style="color:lightblue;padding: 5px; font-size: 10px;  text-align: center; text-decoration: none; margin: 5px 2px;">License</a>
   <br>
   <a href="https://github.com/apache/incubator-singa" class="fa fa-github" style="padding: 10px; font-size: 20px; width: 30px; text-align: center; text-decoration: none; margin: 5px 2px;"></a>
   <a href="https://aws.amazon.com/marketplace/seller-profile?id=5bcac385-12c4-4802-aec7-351e09b77b4c" class="fab fa-aws" style="padding: 10px; font-size: 20px; width: 30px; text-align: center; text-decoration: none; margin: 5px 2px;"></a>
   <a href="https://hub.docker.com/r/apache/singa/" class="fab fa-docker" style="padding: 10px; font-size: 20px; width: 30px; text-align: center; text-decoration: none; margin: 5px 2px;"></a> 
   <a href="https://www.linkedin.com/groups/13550034" class="fa fa-linkedin" style="padding: 10px; font-size: 20px; width: 30px; text-align: center; text-decoration: none; margin: 5px 2px;"></a>
   <a href="https://twitter.com/ApacheSinga" class="fa fa-twitter" style="padding: 10px; font-size: 20px; width: 30px; text-align: center; text-decoration: none; margin: 5px 2px;"></a>
   <a href="https://www.facebook.com/Apache-SINGA-347284219056544/" class="fa fa-facebook" style="padding: 10px; font-size: 20px; width: 30px; text-align: center; text-decoration: none; margin: 5px 2px;"></a>
   <a href="https://www.researchgate.net/project/Apache-SINGA" class="fab fa-researchgate" style="padding: 10px; font-size: 20px; width: 30px; text-align: center; text-decoration: none; margin: 5px 2px;"></a>
 
 </div>
 
  <a href="https://github.com/apache/incubator-singa">
     <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
         src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"
         alt="Fork me on GitHub">
 </a>
 
  
 

</body>
</html>